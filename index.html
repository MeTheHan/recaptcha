<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        body {
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .g-recaptcha {
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <!-- DOĞRUDAN DIV İÇİNDE -->
    <div class="g-recaptcha" 
         data-sitekey="6LfJvS8sAAAAAD94RjcINtfTP6tt7I_reFV8jzw6" 
         data-callback="onCaptchaSuccess"
         data-error-callback="onCaptchaError"
         data-theme="dark"
         data-size="normal">
    </div>

    <script>
        // Site key - SADECE kontrol için
        console.log('Site Key:', '6LfJvS8sAAAAAD94RjcINtfTP6tt7I_reFV8jzw6');
        
        function onCaptchaSuccess(token) {
            console.log('Token alındı:', token);
            // Arka planı yeşil yap
            document.body.style.background = '#00aa00';
            
            // Backend'e gönder
            sendToBackend(token);
        }
        
        function onCaptchaError() {
            console.log('Captcha hatası');
            document.body.style.background = '#aa0000';
            
            // 3 saniye sonra resetle
            setTimeout(() => {
                grecaptcha.reset();
                document.body.style.background = '#000000';
            }, 3000);
        }
        
        function sendToBackend(token) {
            // Backend doğrulaması
            fetch('verify.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ token: token })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Backend cevabı:', data);
                if (!data.success) {
                    document.body.style.background = '#aa0000';
                    setTimeout(() => {
                        grecaptcha.reset();
                        document.body.style.background = '#000000';
                    }, 3000);
                }
            })
            .catch(error => {
                console.error('Hata:', error);
                document.body.style.background = '#aa0000';
                setTimeout(() => {
                    grecaptcha.reset();
                    document.body.style.background = '#000000';
                }, 3000);
            });
        }
        
        // Hata ayıklama için
        window.addEventListener('load', function() {
            console.log('Sayfa yüklendi');
            console.log('grecaptcha var mı?', typeof grecaptcha !== 'undefined');
        });
    </script>
</body>
</html>
